<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
    </head>
    <body>
    <h1>Websocket</h1>
    <h1 id="topic"></h1>
    <p id="message"></p>
    <input id="chat" placeholder="Chat..." />

    <script>

        var socket = new WebSocket("ws://localhost:1337");

        document.getElementById('chat').addEventListener ("keydown", function (event) {
            if (event.keyCode == 13) {
                var message = document.getElementById('chat').value;
                document.getElementById('chat').value = '';
               socket.send(JSON.stringify({topic:'chat',message:message}));
                document.getElementById('message').innerHTML += '<p><strong>You:</strong><br />' + message + '</p>';
            }
        }, false);
        socket.onmessage = function (event) {
            var data = JSON.parse(event.data);
            document.getElementById('topic').innerHTML = data.topic;
            document.getElementById('message').innerHTML += '<p><strong>Stranger:</strong><br />' + data.message + '</p>';
        }
    </script>
    </body>
</html>